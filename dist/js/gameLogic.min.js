"use strict";var allSpans,gameTimeRemaining,gameMode,startSite=document.querySelector(".starter-site"),testSite=document.querySelector(".test-site"),summarySite=document.querySelector(".summary-site"),testText=document.querySelector(".test-site__text p"),inputField=document.querySelector(".test-site__input"),statsHeader=document.querySelector(".test-site__header"),statsContainer=document.querySelector(".test-site__actual-stats"),statsRemainingTime=document.querySelector("#remaining-time"),statsWPM=document.querySelector("#wpm"),statsCPM=document.querySelector("#cpm"),statsAccuracy=document.querySelector("#accuracy"),summarySiteWPM=document.querySelector("#summary-site-wpm"),summarySiteAccuracy=document.querySelector("#summary-site-accuracy"),btn1minute=document.querySelector("#btn-1"),btnFullText=document.querySelector("#btn-full"),tryAgainBtn=document.querySelector("#try-again-btn"),homeBtn=document.querySelector("#home-page-btn"),charactersPerMinute=0,wordsPerMinute=0,accuracy=0,goodLetter=0,wrongLetter=0,actualLetter=0,letterToType=actualLetter+1,gameTimeGone=0,doNotRepeatTimer=0,generateText=function(){Math.floor(15*Math.random()),Math.floor(15*Math.random()+15),Math.floor((randomSentences.length-30)*Math.random()+30);"jebac szczecin".split("").forEach(function(e){e='<span style="padding: .6px;margin: .4px;">'.concat(e,"</span>");testText.innerHTML+=e}),(allSpans=document.querySelectorAll(".test-site__text p > span"))[0].classList.add("letter-to-type")},startTimer=function(){1==gameMode?(gameTimeRemaining=60,window.setInterval(function(){0<gameTimeRemaining?gameTimeRemaining--:endGame(),statsRemainingTime.innerHTML=gameTimeRemaining+"s",updateStats()},1e3)):0==gameMode&&(statsRemainingTime.innerHTML="&infin;",window.setInterval(function(){gameTimeGone++,updateStats()},1e3))},showStats=function(){statsHeader.style.display="none",statsContainer.style.display="flex"},updateStats=function(){1==gameMode?(wordsPerMinute=Math.round(goodLetter/5/(60-gameTimeRemaining)*60),charactersPerMinute=Math.round(goodLetter/(60-gameTimeRemaining)*60),wordsPerMinute==1/0&&(charactersPerMinute=wordsPerMinute="-")):0==gameMode&&(wordsPerMinute=Math.round(goodLetter/5/gameTimeGone*60),charactersPerMinute=Math.round(goodLetter/gameTimeGone*60),wordsPerMinute==1/0)&&(charactersPerMinute=wordsPerMinute="-"),accuracy=0==actualLetter?0:Math.round(goodLetter/(goodLetter+wrongLetter)*100),statsWPM.innerText="".concat(wordsPerMinute),statsCPM.innerText="".concat(charactersPerMinute),statsAccuracy.innerText="".concat(accuracy,"%")},startGame=function(){startSite.style.display="none",testSite.style.display="flex",generateText(),document.addEventListener("keydown",function(){return inputField.focus()}),testText.addEventListener("click",function(){return inputField.focus()})},gameLogic=function(e){var t=testText.innerText.split("");inputField.value.split("")[actualLetter]===t[actualLetter]?(allSpans[actualLetter].className="",allSpans[actualLetter].classList.add("correct-letter"),null!=allSpans[letterToType]&&allSpans[letterToType].classList.add("letter-to-type"),actualLetter++,letterToType++,goodLetter++):inputField.value.split("")[actualLetter]?(allSpans[actualLetter].className="",allSpans[actualLetter].classList.add("incorrect-letter"),null!=allSpans[letterToType]&&allSpans[letterToType].classList.add("letter-to-type"),actualLetter++,letterToType++,wrongLetter++):(e.key="backspace",allSpans[actualLetter].className="",letterToType--,allSpans[--actualLetter].classList.contains("correct-letter")?goodLetter--:wrongLetter--,allSpans[letterToType-1].classList.add("letter-to-type")),1==gameMode&&1==inputField.value.split("").length&&0==doNotRepeatTimer&&(doNotRepeatTimer=1,startTimer(),showStats()),0==gameMode&&1==inputField.value.split("").length&&0==doNotRepeatTimer&&(doNotRepeatTimer=1,startTimer(),showStats()),updateStats(),console.log(inputField.value.split("").length),console.log(t.length),inputField.value.split("").length==t.length&&endGame()},fullTimeGameMode=function(){startGame(),gameMode=0},remainingTimeGameMode=function(){startGame(),gameMode=1},endGame=function(){testSite.style.display="none",summarySite.style.display="flex",summarySiteWPM.innerText=wordsPerMinute,summarySiteAccuracy.innerText=Math.round(goodLetter/(goodLetter+wrongLetter)*100)};btn1minute.addEventListener("click",remainingTimeGameMode),btnFullText.addEventListener("click",fullTimeGameMode),inputField.addEventListener("input",gameLogic),homeBtn.addEventListener("click",function(){location.reload()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWVMb2dpYy5qcyJdLCJuYW1lcyI6WyJ0ZXN0VGV4dCIsImFjdHVhbExldHRlciIsImdhbWVUaW1lUmVtYWluaW5nIiwic3RhcnRTaXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGVzdFNpdGUiLCJpbnB1dEZpZWxkIiwic3RhdHNIZWFkZXIiLCJzdGF0c0NvbnRhaW5lciIsInN0YXRzUmVtYWluaW5nVGltZSIsInN0YXRzV1BNIiwic3RhdHNDUE0iLCJzdGF0c0FjY3VyYWN5IiwiYnRuMW1pbnV0ZSIsImJ0bkZ1bGxUZXh0IiwiY2hhcmFjdGVyc1Blck1pbnV0ZSIsIndvcmRzUGVyTWludXRlIiwiYWNjdXJhY3kiLCJnb29kTGV0dGVyIiwid3JvbmdMZXR0ZXIiLCJsZXR0ZXJUb1R5cGUiLCJnYW1lVGltZUdvbmUiLCJnZW5lcmF0ZVRleHQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21TZW50ZW5jZXMiLCJsZW5ndGgiLCJzcGxpdCIsImZvckVhY2giLCJsZXR0ZXIiLCJsZXR0ZXJUYWciLCJjb25jYXQiLCJ0ZXN0VGV4dENvbnRlbnQiLCJhbGxTcGFucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdGFydFRpbWVyIiwid2luZG93IiwiZW5kR2FtZSIsInVwZGF0ZVN0YXRzIiwiZ2FtZU1vZGUiLCJpbm5lckhUTUwiLCJzZXRJbnRlcnZhbCIsInNob3dTdGF0cyIsInN0eWxlIiwiZGlzcGxheSIsInJvdW5kIiwiSW5maW5pdHkiLCJpbm5lclRleHQiLCJzdGFydEdhbWUiLCJmb2N1cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJnYW1lTG9naWMiLCJhbGxMZXR0ZXJzIiwidmFsdWUiLCJjbGFzc05hbWUiLCJlIiwidW5kZWZpbmVkIiwia2V5IiwiY29udGFpbnMiLCJkb05vdFJlcGVhdFRpbWVyIiwiY29uc29sZSIsImxvZyIsImZ1bGxUaW1lR2FtZU1vZGUiLCJyZW1haW5pbmdUaW1lR2FtZU1vZGUiLCJzdW1tYXJ5U2l0ZSIsInN1bW1hcnlTaXRlV1BNIiwic3VtbWFyeVNpdGVBY2N1cmFjeSIsImhvbWVCdG4iLCJsb2NhdGlvbiIsInJlbG9hZCJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFLTUEsU0EwQkZDLGtCQUVBQyxTQWpDRUMsVUFBWUMsU0FBU0MsY0FBYyxlQUFlLEVBRHhEQyxTQUFBRixTQUFBQyxjQUFBLFlBQUEsRUFDTUYsWUFBWUMsU0FBU0MsY0FBYyxlQUFnQixFQUtuREwsU0FBV0ksU0FBU0MsY0FBYyxvQkFBb0IsRUFENURFLFdBQUFILFNBQUFDLGNBQUEsbUJBQUEsRUFNTUcsWUFBY0osU0FBU0MsY0FBYyxvQkFBb0IsRUFEL0RJLGVBQUFMLFNBQUFDLGNBQUEsMEJBQUEsRUFDTUcsbUJBQXVCSCxTQUFBQSxjQUFjLGlCQUFxQixFQUMxREksU0FBQUEsU0FBaUJMLGNBQVNDLE1BQWMsRUFDeENLLFNBQUFBLFNBQXFCTixjQUFTQyxNQUFBQSxFQUM5Qk0sY0FBV1AsU0FBU0MsY0FBcUIsV0FBQSxFQUN6Q08sZUFBbUJSLFNBQUNDLGNBQXFCLG1CQUFBLEVBQ3pDUSxvQkFBd0JULFNBQUNDLGNBQWMsd0JBQVksRUFLbkRTLFdBQWFWLFNBQVNDLGNBQWMsUUFBUSxFQURsRFUsWUFBQVgsU0FBQUMsY0FBQSxXQUFBLEVBQ01TLFlBQWFWLFNBQVNDLGNBQWMsZ0JBQVMsRUFDN0NVLFFBQVdYLFNBQUdBLGNBQVNDLGdCQUEwQixFQUtuRFcsb0JBQXNCLEVBRDFCQyxlQUFBLEVBQ0lELFNBQUFBLEVBQ0FDLFdBQUFBLEVBQ0FDLFlBQVksRUFDWkMsYUFBYyxFQUNkQyxhQUFlbkIsYUFBQSxFQUVmb0IsYUFBZXBCLEVBRWZxQixpQkFBZ0IsRUFPZEMsYUFBZSxXQUFBQyxLQUFBQyxNQUFmRixHQUFBQSxLQUFZRyxPQUFTLENBQUEsRUFDMUJGLEtBQUFDLE1BQUEsR0FBQUQsS0FBQUUsT0FBQSxFQUFBLEVBQUEsRUFDaUJGLEtBQU9DLE9BQU9FLGdCQUFnQkMsT0FBRyxJQUFBSixLQUFBRSxPQUFB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LCJzb3VyY2VzQ29udGVudCI6WyIvLyBTaXRlc1xuY29uc3Qgc3RhcnRTaXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0ZXItc2l0ZScpXG5jb25zdCB0ZXN0U2l0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXN0LXNpdGUnKVxuY29uc3Qgc3VtbWFyeVNpdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VtbWFyeS1zaXRlJylcblxuLy8gRWxlbWVudHNcbmNvbnN0IHRlc3RUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9fdGV4dCBwJylcbmNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVzdC1zaXRlX19pbnB1dCcpXG5sZXQgYWxsU3BhbnNcblxuLy8gU3RhdHMgZWxlbWVudHNcbmNvbnN0IHN0YXRzSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9faGVhZGVyJylcbmNvbnN0IHN0YXRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9fYWN0dWFsLXN0YXRzJylcbmNvbnN0IHN0YXRzUmVtYWluaW5nVGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1haW5pbmctdGltZScpXG5jb25zdCBzdGF0c1dQTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cG0nKVxuY29uc3Qgc3RhdHNDUE0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3BtJylcbmNvbnN0IHN0YXRzQWNjdXJhY3kgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWNjdXJhY3knKVxuY29uc3Qgc3VtbWFyeVNpdGVXUE0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VtbWFyeS1zaXRlLXdwbScpXG5jb25zdCBzdW1tYXJ5U2l0ZUFjY3VyYWN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1bW1hcnktc2l0ZS1hY2N1cmFjeScpXG5cbi8vIEJ1dHRvbnNcbmNvbnN0IGJ0bjFtaW51dGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuLTEnKVxuY29uc3QgYnRuRnVsbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuLWZ1bGwnKVxuY29uc3QgdHJ5QWdhaW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJ5LWFnYWluLWJ0bicpXG5jb25zdCBob21lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hvbWUtcGFnZS1idG4nKVxuXG4vLyBIZWxwIHZhcmlhYmxlc1xubGV0IGNoYXJhY3RlcnNQZXJNaW51dGUgPSAwXG5sZXQgd29yZHNQZXJNaW51dGUgPSAwXG5sZXQgYWNjdXJhY3kgPSAwXG5sZXQgZ29vZExldHRlciA9IDBcbmxldCB3cm9uZ0xldHRlciA9IDBcbmxldCBhY3R1YWxMZXR0ZXIgPSAwXG5sZXQgbGV0dGVyVG9UeXBlID0gYWN0dWFsTGV0dGVyICsgMVxubGV0IGdhbWVUaW1lUmVtYWluaW5nXG5sZXQgZ2FtZVRpbWVHb25lID0gMFxubGV0IGdhbWVNb2RlXG5sZXQgZG9Ob3RSZXBlYXRUaW1lciA9IDBcblxuLy8gRnVuY3Rpb25zXG5cbi8vIEdlbmVyYXRpbmcgdGV4dCBmb3IgdGVzdFxuY29uc3QgZ2VuZXJhdGVUZXh0ID0gKCkgPT4ge1xuXHQvLyBHZW5lcmF0aW5nIDMgcmFuZG9tIG51bWJlcnMsIHRoZW4gY3JlYXRlIHRleHQgd2l0aCAzIGVsZW1lbnRzIGZyb20gcmFuZG9tU2VudGVuY2VzLmpzXG5cdGxldCByYW5kb21OdW1iZXIxID0gTWF0aC5mbG9vcigxNSAqIE1hdGgucmFuZG9tKCkpXG5cdGxldCByYW5kb21OdW1iZXIyID0gTWF0aC5mbG9vcigxNSAqIE1hdGgucmFuZG9tKCkgKyAxNSlcblx0bGV0IHJhbmRvbU51bWJlcjMgPSBNYXRoLmZsb29yKChyYW5kb21TZW50ZW5jZXMubGVuZ3RoIC0gMzApICogTWF0aC5yYW5kb20oKSArIDMwKVxuXG5cdC8vIGNvbnN0IHRlc3RUZXh0Q29udGVudCA9IGAke3JhbmRvbVNlbnRlbmNlc1tyYW5kb21OdW1iZXIxXX0gJHtyYW5kb21TZW50ZW5jZXNbcmFuZG9tTnVtYmVyMl19ICR7cmFuZG9tU2VudGVuY2VzW3JhbmRvbU51bWJlcjNdfWBcblx0Y29uc3QgdGVzdFRleHRDb250ZW50ID0gYGplYmFjIHN6Y3plY2luYFxuXG5cdC8vIFNwbGl0IGdhbWUgdGV4dCBsZXR0ZXJzIHRvIHNwYW5zIChiZWFjdXNlIGl0IGlzIGVhc2llciB0byBjaGVjayB3cm9uZy9nb29kIGxldHRlciBsYXRlcilcblx0dGVzdFRleHRDb250ZW50LnNwbGl0KCcnKS5mb3JFYWNoKGxldHRlciA9PiB7XG5cdFx0bGV0IGxldHRlclRhZyA9IGA8c3BhbiBzdHlsZT1cInBhZGRpbmc6IC42cHg7bWFyZ2luOiAuNHB4O1wiPiR7bGV0dGVyfTwvc3Bhbj5gXG5cdFx0dGVzdFRleHQuaW5uZXJIVE1MICs9IGxldHRlclRhZ1xuXHR9KVxuXG5cdC8vIERlY2xhcmUgc3BhbnMgYW5kIGdpdmUgYW5pbWF0aW9uIHRvIGZpcnN0IHNwYW5cblx0YWxsU3BhbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVzdC1zaXRlX190ZXh0IHAgPiBzcGFuJylcblx0YWxsU3BhbnNbMF0uY2xhc3NMaXN0LmFkZCgnbGV0dGVyLXRvLXR5cGUnKVxufVxuXG5jb25zdCBzdGFydFRpbWVyID0gKCkgPT4ge1xuXHRpZiAoZ2FtZU1vZGUgPT0gMSkge1xuXHRcdGdhbWVUaW1lUmVtYWluaW5nID0gNjBcblx0XHR3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHRcdFx0Z2FtZVRpbWVSZW1haW5pbmcgPiAwID8gZ2FtZVRpbWVSZW1haW5pbmctLSA6IGVuZEdhbWUoKVxuXHRcdFx0c3RhdHNSZW1haW5pbmdUaW1lLmlubmVySFRNTCA9IGdhbWVUaW1lUmVtYWluaW5nICsgJ3MnXG5cdFx0XHR1cGRhdGVTdGF0cygpXG5cdFx0fSwgMTAwMClcblx0fSBlbHNlIGlmIChnYW1lTW9kZSA9PSAwKSB7XG5cdFx0c3RhdHNSZW1haW5pbmdUaW1lLmlubmVySFRNTCA9IGAmaW5maW47YFxuXHRcdHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0XHRnYW1lVGltZUdvbmUrK1xuXHRcdFx0dXBkYXRlU3RhdHMoKVxuXHRcdH0sIDEwMDApXG5cdH1cbn1cblxuLy8gU2hvd2luZyBzdGF0aXN0aWNzIGR1cmluZyB0aGUgdGVzdFxuY29uc3Qgc2hvd1N0YXRzID0gKCkgPT4ge1xuXHRzdGF0c0hlYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cdHN0YXRzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcbn1cblxuLy8gVXBkYXRpbmcgc3RhdGlzdGljcyBkdXJpbmcgdGhlIHRlc3RcbmNvbnN0IHVwZGF0ZVN0YXRzID0gKCkgPT4ge1xuXHRpZiAoZ2FtZU1vZGUgPT0gMSkge1xuXHRcdHdvcmRzUGVyTWludXRlID0gTWF0aC5yb3VuZCgoZ29vZExldHRlciAvIDUgLyAoNjAgLSBnYW1lVGltZVJlbWFpbmluZykpICogNjApXG5cdFx0Y2hhcmFjdGVyc1Blck1pbnV0ZSA9IE1hdGgucm91bmQoKGdvb2RMZXR0ZXIgLyAoNjAgLSBnYW1lVGltZVJlbWFpbmluZykpICogNjApXG5cdFx0aWYgKHdvcmRzUGVyTWludXRlID09IEluZmluaXR5KSB7XG5cdFx0XHR3b3Jkc1Blck1pbnV0ZSA9IGAtYFxuXHRcdFx0Y2hhcmFjdGVyc1Blck1pbnV0ZSA9IGAtYFxuXHRcdH1cblx0fSBlbHNlIGlmIChnYW1lTW9kZSA9PSAwKSB7XG5cdFx0d29yZHNQZXJNaW51dGUgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gNSAvIGdhbWVUaW1lR29uZSkgKiA2MClcblx0XHRjaGFyYWN0ZXJzUGVyTWludXRlID0gTWF0aC5yb3VuZCgoZ29vZExldHRlciAvIGdhbWVUaW1lR29uZSkgKiA2MClcblx0XHRpZiAod29yZHNQZXJNaW51dGUgPT0gSW5maW5pdHkpIHtcblx0XHRcdHdvcmRzUGVyTWludXRlID0gYC1gXG5cdFx0XHRjaGFyYWN0ZXJzUGVyTWludXRlID0gYC1gXG5cdFx0fVxuXHR9XG5cdGFjdHVhbExldHRlciA9PSAwID8gKGFjY3VyYWN5ID0gMCkgOiAoYWNjdXJhY3kgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gKGdvb2RMZXR0ZXIgKyB3cm9uZ0xldHRlcikpICogMTAwKSlcblx0c3RhdHNXUE0uaW5uZXJUZXh0ID0gYCR7d29yZHNQZXJNaW51dGV9YFxuXHRzdGF0c0NQTS5pbm5lclRleHQgPSBgJHtjaGFyYWN0ZXJzUGVyTWludXRlfWBcblx0c3RhdHNBY2N1cmFjeS5pbm5lclRleHQgPSBgJHthY2N1cmFjeX0lYFxufVxuXG4vLyBTdGFydCBnYW1lLCBnZW5lcmF0aW5nIHRleHQgYW5kIGZvY3VzIGlucHV0XG5jb25zdCBzdGFydEdhbWUgPSAoKSA9PiB7XG5cdHN0YXJ0U2l0ZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cdHRlc3RTaXRlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcblx0Z2VuZXJhdGVUZXh0KClcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsICgpID0+IGlucHV0RmllbGQuZm9jdXMoKSlcblx0dGVzdFRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBpbnB1dEZpZWxkLmZvY3VzKCkpXG59XG5cbi8vIFdob2xlIGdhbWUgbG9naWNcbmNvbnN0IGdhbWVMb2dpYyA9IGUgPT4ge1xuXHRjb25zdCBhbGxMZXR0ZXJzID0gdGVzdFRleHQuaW5uZXJUZXh0LnNwbGl0KCcnKVxuXG5cdGlmIChpbnB1dEZpZWxkLnZhbHVlLnNwbGl0KCcnKVthY3R1YWxMZXR0ZXJdID09PSBhbGxMZXR0ZXJzW2FjdHVhbExldHRlcl0pIHtcblx0XHRhbGxTcGFuc1thY3R1YWxMZXR0ZXJdLmNsYXNzTmFtZSA9ICcnXG5cdFx0YWxsU3BhbnNbYWN0dWFsTGV0dGVyXS5jbGFzc0xpc3QuYWRkKCdjb3JyZWN0LWxldHRlcicpXG5cdFx0aWYgKCEoYWxsU3BhbnNbbGV0dGVyVG9UeXBlXSA9PSB1bmRlZmluZWQpKSB7XG5cdFx0XHRhbGxTcGFuc1tsZXR0ZXJUb1R5cGVdLmNsYXNzTGlzdC5hZGQoJ2xldHRlci10by10eXBlJylcblx0XHR9XG5cdFx0YWN0dWFsTGV0dGVyKytcblx0XHRsZXR0ZXJUb1R5cGUrK1xuXHRcdGdvb2RMZXR0ZXIrK1xuXHR9IGVsc2UgaWYgKGlucHV0RmllbGQudmFsdWUuc3BsaXQoJycpW2FjdHVhbExldHRlcl0pIHtcblx0XHRhbGxTcGFuc1thY3R1YWxMZXR0ZXJdLmNsYXNzTmFtZSA9ICcnXG5cdFx0YWxsU3BhbnNbYWN0dWFsTGV0dGVyXS5jbGFzc0xpc3QuYWRkKCdpbmNvcnJlY3QtbGV0dGVyJylcblx0XHRpZiAoIShhbGxTcGFuc1tsZXR0ZXJUb1R5cGVdID09IHVuZGVmaW5lZCkpIHtcblx0XHRcdGFsbFNwYW5zW2xldHRlclRvVHlwZV0uY2xhc3NMaXN0LmFkZCgnbGV0dGVyLXRvLXR5cGUnKVxuXHRcdH1cblx0XHRhY3R1YWxMZXR0ZXIrK1xuXHRcdGxldHRlclRvVHlwZSsrXG5cdFx0d3JvbmdMZXR0ZXIrK1xuXHR9IGVsc2UgaWYgKChlLmtleSA9ICdiYWNrc3BhY2UnKSkge1xuXHRcdGFsbFNwYW5zW2FjdHVhbExldHRlcl0uY2xhc3NOYW1lID0gJydcblx0XHRhY3R1YWxMZXR0ZXItLVxuXHRcdGxldHRlclRvVHlwZS0tXG5cdFx0YWxsU3BhbnNbYWN0dWFsTGV0dGVyXS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvcnJlY3QtbGV0dGVyJykgPyBnb29kTGV0dGVyLS0gOiB3cm9uZ0xldHRlci0tXG5cdFx0YWxsU3BhbnNbbGV0dGVyVG9UeXBlIC0gMV0uY2xhc3NMaXN0LmFkZCgnbGV0dGVyLXRvLXR5cGUnKVxuXHR9XG5cblx0aWYgKGdhbWVNb2RlID09IDEgJiYgaW5wdXRGaWVsZC52YWx1ZS5zcGxpdCgnJykubGVuZ3RoID09IDEpIHtcblx0XHRpZiAoZG9Ob3RSZXBlYXRUaW1lciA9PSAwKSB7XG5cdFx0XHRkb05vdFJlcGVhdFRpbWVyID0gMVxuXHRcdFx0c3RhcnRUaW1lcigpXG5cdFx0XHRzaG93U3RhdHMoKVxuXHRcdH1cblx0fVxuXG5cdGlmIChnYW1lTW9kZSA9PSAwICYmIGlucHV0RmllbGQudmFsdWUuc3BsaXQoJycpLmxlbmd0aCA9PSAxKSB7XG5cdFx0aWYgKGRvTm90UmVwZWF0VGltZXIgPT0gMCkge1xuXHRcdFx0ZG9Ob3RSZXBlYXRUaW1lciA9IDFcblx0XHRcdHN0YXJ0VGltZXIoKVxuXHRcdFx0c2hvd1N0YXRzKClcblx0XHR9XG5cdH1cblx0dXBkYXRlU3RhdHMoKVxuXG5cdGNvbnNvbGUubG9nKGlucHV0RmllbGQudmFsdWUuc3BsaXQoJycpLmxlbmd0aClcblx0Y29uc29sZS5sb2coYWxsTGV0dGVycy5sZW5ndGgpXG5cdGlmIChpbnB1dEZpZWxkLnZhbHVlLnNwbGl0KCcnKS5sZW5ndGggPT0gYWxsTGV0dGVycy5sZW5ndGgpIHtcblx0XHRlbmRHYW1lKClcblx0fVxufVxuXG4vLyBDaG9vc2luZyBnYW1lIG1vZGUgKDAgaXMgZnVsbCB0aW1lIGdhbWUsIDEgaXMgdGltZSBnYW1lKVxuLy8gRnVsbCB0aW1lIGdhbWUgY3VycmVudGx5IGRvZXMgbm90IHdvcmtcbmNvbnN0IGZ1bGxUaW1lR2FtZU1vZGUgPSAoKSA9PiB7XG5cdHN0YXJ0R2FtZSgpXG5cdGdhbWVNb2RlID0gMFxufVxuXG5jb25zdCByZW1haW5pbmdUaW1lR2FtZU1vZGUgPSAoKSA9PiB7XG5cdHN0YXJ0R2FtZSgpXG5cdGdhbWVNb2RlID0gMVxufVxuXG4vLyBFbmRpbmcgZ2FtZSBhbmQgc2hvdyBmaW5hbCBzdGF0aXN0aWNzXG5jb25zdCBlbmRHYW1lID0gKCkgPT4ge1xuXHR0ZXN0U2l0ZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cdHN1bW1hcnlTaXRlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcblx0c3VtbWFyeVNpdGVXUE0uaW5uZXJUZXh0ID0gd29yZHNQZXJNaW51dGVcblx0c3VtbWFyeVNpdGVBY2N1cmFjeS5pbm5lclRleHQgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gKGdvb2RMZXR0ZXIgKyB3cm9uZ0xldHRlcikpICogMTAwKVxufVxuXG4vLyBjb25zdCByZXNldEdhbWUgPSAoKSA9PiB7fVxuXG4vLyBMaXN0ZW5lcnMgdG8gYnV0dG9uc1xuYnRuMW1pbnV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbWFpbmluZ1RpbWVHYW1lTW9kZSlcbmJ0bkZ1bGxUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVsbFRpbWVHYW1lTW9kZSlcbmlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBnYW1lTG9naWMpXG5ob21lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRsb2NhdGlvbi5yZWxvYWQoKVxufSlcbiJdfQ==
