"use strict";var allSpans,gameTimeRemaining,gameMode,startSite=document.querySelector(".starter-site"),testSite=document.querySelector(".test-site"),summarySite=document.querySelector(".summary-site"),testText=document.querySelector(".test-site__text p"),inputField=document.querySelector(".test-site__input"),statsHeader=document.querySelector(".test-site__header"),statsContainer=document.querySelector(".test-site__actual-stats"),statsRemainingTime=document.querySelector("#remaining-time"),statsWPM=document.querySelector("#wpm"),statsCPM=document.querySelector("#cpm"),statsAccuracy=document.querySelector("#accuracy"),summarySiteWPM=document.querySelector("#summary-site-wpm"),summarySiteAccuracy=document.querySelector("#summary-site-accuracy"),btn1minute=document.querySelector("#btn-1"),btnFullText=document.querySelector("#btn-full"),tryAgainBtn=document.querySelector("#try-again-btn"),homeBtn=document.querySelector("#home-page-btn"),charactersPerMinute=0,wordsPerMinute=0,accuracy=0,goodLetter=0,wrongLetter=0,actualLetter=0,letterToType=actualLetter+1,gameTimeGone=0,doNotRepeatTimer=0,generateText=function(){var e=Math.floor(15*Math.random()),t=Math.floor(15*Math.random()+15),a=Math.floor((randomSentences.length-30)*Math.random()+30);"".concat(randomSentences[e]," ").concat(randomSentences[t]," ").concat(randomSentences[a]).split("").forEach(function(e){e='<span style="padding: .6px;margin: .4px;">'.concat(e,"</span>");testText.innerHTML+=e}),(allSpans=document.querySelectorAll(".test-site__text p > span"))[0].classList.add("letter-to-type")},startTimer=(generateText(),function(){1==gameMode?(gameTimeRemaining=60,window.setInterval(function(){0<gameTimeRemaining?gameTimeRemaining--:endGame(),statsRemainingTime.innerHTML=gameTimeRemaining+"s",updateStats()},1e3)):0==gameMode&&(statsRemainingTime.innerHTML="&infin;",window.setInterval(function(){gameTimeGone++,updateStats()},1e3))}),showStats=function(){statsHeader.style.display="none",statsContainer.style.display="flex"},updateStats=function(){1==gameMode?(wordsPerMinute=Math.round(goodLetter/5/(60-gameTimeRemaining)*60),charactersPerMinute=Math.round(goodLetter/(60-gameTimeRemaining)*60),wordsPerMinute==1/0&&(charactersPerMinute=wordsPerMinute="-")):0==gameMode&&(wordsPerMinute=Math.round(goodLetter/5/gameTimeGone*60),charactersPerMinute=Math.round(goodLetter/gameTimeGone*60),wordsPerMinute==1/0)&&(charactersPerMinute=wordsPerMinute="-"),accuracy=0==actualLetter?0:Math.round(goodLetter/(goodLetter+wrongLetter)*100),statsWPM.innerText="".concat(wordsPerMinute),statsCPM.innerText="".concat(charactersPerMinute),statsAccuracy.innerText="".concat(accuracy,"%")},startGame=function(){startSite.style.display="none",testSite.style.display="flex",document.addEventListener("keydown",function(){return inputField.focus()}),testText.addEventListener("click",function(){return inputField.focus()})},gameLogic=function(e){var t=testText.innerText.split("");inputField.value.split("")[actualLetter]===t[actualLetter]?(allSpans[actualLetter].className="",allSpans[actualLetter].classList.add("correct-letter"),null!=allSpans[letterToType]&&allSpans[letterToType].classList.add("letter-to-type"),actualLetter++,letterToType++,goodLetter++):inputField.value.split("")[actualLetter]?(allSpans[actualLetter].className="",allSpans[actualLetter].classList.add("incorrect-letter"),null!=allSpans[letterToType]&&allSpans[letterToType].classList.add("letter-to-type"),actualLetter++,letterToType++,wrongLetter++):(e.key="backspace",allSpans[actualLetter].className="",letterToType--,allSpans[--actualLetter].classList.contains("correct-letter")?goodLetter--:wrongLetter--,allSpans[letterToType-1].classList.add("letter-to-type")),1==gameMode&&1==inputField.value.split("").length&&0==doNotRepeatTimer&&(doNotRepeatTimer=1,startTimer(),showStats()),0==gameMode&&1==inputField.value.split("").length&&0==doNotRepeatTimer&&(doNotRepeatTimer=1,startTimer(),showStats()),updateStats(),inputField.value.split("").length==t.length&&endGame()},fullTimeGameMode=function(){startGame(),gameMode=0},remainingTimeGameMode=function(){startGame(),gameMode=1},endGame=function(){testSite.style.display="none",summarySite.style.display="flex",summarySiteWPM.innerText=wordsPerMinute,summarySiteAccuracy.innerText=Math.round(goodLetter/(goodLetter+wrongLetter)*100)},goHome=function(){location.reload()};btn1minute.addEventListener("click",remainingTimeGameMode),btnFullText.addEventListener("click",fullTimeGameMode),inputField.addEventListener("input",gameLogic),homeBtn.addEventListener("click",goHome);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWVMb2dpYy5qcyJdLCJuYW1lcyI6WyJ0ZXN0VGV4dCIsImFjdHVhbExldHRlciIsImdhbWVUaW1lUmVtYWluaW5nIiwic3RhcnRTaXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGVzdFNpdGUiLCJpbnB1dEZpZWxkIiwic3RhdHNIZWFkZXIiLCJzdGF0c0NvbnRhaW5lciIsInN0YXRzUmVtYWluaW5nVGltZSIsInN0YXRzV1BNIiwic3RhdHNDUE0iLCJzdGF0c0FjY3VyYWN5IiwiYnRuMW1pbnV0ZSIsImJ0bkZ1bGxUZXh0IiwiY2hhcmFjdGVyc1Blck1pbnV0ZSIsIndvcmRzUGVyTWludXRlIiwiYWNjdXJhY3kiLCJnb29kTGV0dGVyIiwid3JvbmdMZXR0ZXIiLCJsZXR0ZXJUb1R5cGUiLCJnYW1lVGltZUdvbmUiLCJnZW5lcmF0ZVRleHQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21OdW1iZXIyIiwicmFuZG9tTnVtYmVyMyIsInJhbmRvbVNlbnRlbmNlcyIsImxlbmd0aCIsImNvbmNhdCIsInNwbGl0IiwiZm9yRWFjaCIsImxldHRlciIsInRlc3RUZXh0Q29udGVudCIsImxldHRlclRhZyIsImFsbFNwYW5zIiwicXVlcnlTZWxlY3RvckFsbCIsInN0YXJ0VGltZXIiLCJnYW1lTW9kZSIsIndpbmRvdyIsInNldEludGVydmFsIiwiZW5kR2FtZSIsInVwZGF0ZVN0YXRzIiwiaW5uZXJIVE1MIiwic2hvd1N0YXRzIiwic3R5bGUiLCJkaXNwbGF5IiwiSW5maW5pdHkiLCJyb3VuZCIsImlubmVyVGV4dCIsInN0YXJ0R2FtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJmb2N1cyIsImdhbWVMb2dpYyIsImUiLCJhbGxMZXR0ZXJzIiwidmFsdWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbGFzc05hbWUiLCJkb05vdFJlcGVhdFRpbWVyIiwic3VtbWFyeVNpdGUiLCJzdW1tYXJ5U2l0ZVdQTSIsInN1bW1hcnlTaXRlQWNjdXJhY3kiLCJnb0hvbWUiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJlbWFpbmluZ1RpbWVHYW1lTW9kZSIsImhvbWVCdG4iXSwibWFwcGluZ3MiOiJhQUNBLElBS01BLFNBMEJGQyxrQkFFQUMsU0FqQ0VDLFVBQVlDLFNBQVNDLGNBQWMsZUFBZSxFQUR4REMsU0FBQUYsU0FBQUMsY0FBQSxZQUFBLEVBQ01GLFlBQVlDLFNBQVNDLGNBQWMsZUFBZ0IsRUFLbkRMLFNBQVdJLFNBQVNDLGNBQWMsb0JBQW9CLEVBRDVERSxXQUFBSCxTQUFBQyxjQUFBLG1CQUFBLEVBTU1HLFlBQWNKLFNBQVNDLGNBQWMsb0JBQW9CLEVBRC9ESSxlQUFBTCxTQUFBQyxjQUFBLDBCQUFBLEVBQ01HLG1CQUF1QkgsU0FBQUEsY0FBYyxpQkFBcUIsRUFDMURJLFNBQUFBLFNBQWlCTCxjQUFTQyxNQUFjLEVBQ3hDSyxTQUFBQSxTQUFxQk4sY0FBU0MsTUFBQUEsRUFDOUJNLGNBQVdQLFNBQVNDLGNBQXFCLFdBQUEsRUFDekNPLGVBQW1CUixTQUFDQyxjQUFxQixtQkFBQSxFQUN6Q1Esb0JBQXdCVCxTQUFDQyxjQUFjLHdCQUFZLEVBS25EUyxXQUFhVixTQUFTQyxjQUFjLFFBQVEsRUFEbERVLFlBQUFYLFNBQUFDLGNBQUEsV0FBQSxFQUNNUyxZQUFhVixTQUFTQyxjQUFjLGdCQUFTLEVBQzdDVSxRQUFXWCxTQUFHQSxjQUFTQyxnQkFBMEIsRUFLbkRXLG9CQUFzQixFQUQxQkMsZUFBQSxFQUNJRCxTQUFBQSxFQUNBQyxXQUFBQSxFQUNBQyxZQUFZLEVBQ1pDLGFBQWMsRUFDZEMsYUFBZW5CLGFBQUEsRUFFZm9CLGFBQWVwQixFQUVmcUIsaUJBQWdCLEVBT2RDLGFBQWUsV0FBckIsSUFBTUEsRUFBZUMsS0FBQUMsTUFBZkYsR0FBQUEsS0FBWUcsT0FBUyxDQUFBLEVBQzFCQyxFQUFBSCxLQUFBQyxNQUFBLEdBQUFELEtBQUFFLE9BQUEsRUFBQSxFQUFBLEVBQ0FFLEVBQWlCSixLQUFPQyxPQUFPSSxnQkFBZ0JDLE9BQUcsSUFBQU4sS0FBQUUsT0FB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dGVudCI6WyIvLyBTaXRlc1xuY29uc3Qgc3RhcnRTaXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0ZXItc2l0ZScpXG5jb25zdCB0ZXN0U2l0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXN0LXNpdGUnKVxuY29uc3Qgc3VtbWFyeVNpdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VtbWFyeS1zaXRlJylcblxuLy8gRWxlbWVudHNcbmNvbnN0IHRlc3RUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9fdGV4dCBwJylcbmNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVzdC1zaXRlX19pbnB1dCcpXG5sZXQgYWxsU3BhbnNcblxuLy8gU3RhdHMgZWxlbWVudHNcbmNvbnN0IHN0YXRzSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9faGVhZGVyJylcbmNvbnN0IHN0YXRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9fYWN0dWFsLXN0YXRzJylcbmNvbnN0IHN0YXRzUmVtYWluaW5nVGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZW1haW5pbmctdGltZScpXG5jb25zdCBzdGF0c1dQTSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cG0nKVxuY29uc3Qgc3RhdHNDUE0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3BtJylcbmNvbnN0IHN0YXRzQWNjdXJhY3kgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWNjdXJhY3knKVxuY29uc3Qgc3VtbWFyeVNpdGVXUE0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3VtbWFyeS1zaXRlLXdwbScpXG5jb25zdCBzdW1tYXJ5U2l0ZUFjY3VyYWN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1bW1hcnktc2l0ZS1hY2N1cmFjeScpXG5cbi8vIEJ1dHRvbnNcbmNvbnN0IGJ0bjFtaW51dGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuLTEnKVxuY29uc3QgYnRuRnVsbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuLWZ1bGwnKVxuY29uc3QgdHJ5QWdhaW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJ5LWFnYWluLWJ0bicpXG5jb25zdCBob21lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hvbWUtcGFnZS1idG4nKVxuXG4vLyBIZWxwIHZhcmlhYmxlc1xubGV0IGNoYXJhY3RlcnNQZXJNaW51dGUgPSAwXG5sZXQgd29yZHNQZXJNaW51dGUgPSAwXG5sZXQgYWNjdXJhY3kgPSAwXG5sZXQgZ29vZExldHRlciA9IDBcbmxldCB3cm9uZ0xldHRlciA9IDBcbmxldCBhY3R1YWxMZXR0ZXIgPSAwXG5sZXQgbGV0dGVyVG9UeXBlID0gYWN0dWFsTGV0dGVyICsgMVxubGV0IGdhbWVUaW1lUmVtYWluaW5nXG5sZXQgZ2FtZVRpbWVHb25lID0gMFxubGV0IGdhbWVNb2RlXG5sZXQgZG9Ob3RSZXBlYXRUaW1lciA9IDBcblxuLy8gRnVuY3Rpb25zXG5cbi8vIEdlbmVyYXRpbmcgdGV4dCBmb3IgdGVzdFxuY29uc3QgZ2VuZXJhdGVUZXh0ID0gKCkgPT4ge1xuXHQvLyBHZW5lcmF0aW5nIDMgcmFuZG9tIG51bWJlcnMsIHRoZW4gY3JlYXRlIHRleHQgd2l0aCAzIGVsZW1lbnRzIGZyb20gcmFuZG9tU2VudGVuY2VzLmpzXG5cdGxldCByYW5kb21OdW1iZXIxID0gTWF0aC5mbG9vcigxNSAqIE1hdGgucmFuZG9tKCkpXG5cdGxldCByYW5kb21OdW1iZXIyID0gTWF0aC5mbG9vcigxNSAqIE1hdGgucmFuZG9tKCkgKyAxNSlcblx0bGV0IHJhbmRvbU51bWJlcjMgPSBNYXRoLmZsb29yKChyYW5kb21TZW50ZW5jZXMubGVuZ3RoIC0gMzApICogTWF0aC5yYW5kb20oKSArIDMwKVxuXG5cdGNvbnN0IHRlc3RUZXh0Q29udGVudCA9IGAke3JhbmRvbVNlbnRlbmNlc1tyYW5kb21OdW1iZXIxXX0gJHtyYW5kb21TZW50ZW5jZXNbcmFuZG9tTnVtYmVyMl19ICR7cmFuZG9tU2VudGVuY2VzW3JhbmRvbU51bWJlcjNdfWBcblxuXHQvLyBTcGxpdCBnYW1lIHRleHQgbGV0dGVycyB0byBzcGFucyAoYmVhY3VzZSBpdCBpcyBlYXNpZXIgdG8gY2hlY2sgd3JvbmcvZ29vZCBsZXR0ZXIgbGF0ZXIpXG5cdHRlc3RUZXh0Q29udGVudC5zcGxpdCgnJykuZm9yRWFjaChsZXR0ZXIgPT4ge1xuXHRcdGxldCBsZXR0ZXJUYWcgPSBgPHNwYW4gc3R5bGU9XCJwYWRkaW5nOiAuNnB4O21hcmdpbjogLjRweDtcIj4ke2xldHRlcn08L3NwYW4+YFxuXHRcdHRlc3RUZXh0LmlubmVySFRNTCArPSBsZXR0ZXJUYWdcblx0fSlcblxuXHQvLyBEZWNsYXJlIHNwYW5zIGFuZCBnaXZlIGFuaW1hdGlvbiB0byBmaXJzdCBzcGFuXG5cdGFsbFNwYW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlc3Qtc2l0ZV9fdGV4dCBwID4gc3BhbicpXG5cdGFsbFNwYW5zWzBdLmNsYXNzTGlzdC5hZGQoJ2xldHRlci10by10eXBlJylcbn1cblxuLy8gR2VuZXJhdGluZyB0ZXh0IGJlZm9yZSBhbnkgZnVuY3Rpb24sIGJlY2F1c2UgaXQgd2FzIGEgcHJvYmxlbSB3aXRoIGVmZmljaWVuY3kgb24gYmFkIHBjIHdoaWxlIHN0YXJ0aW5nIGdhbWVcbmdlbmVyYXRlVGV4dCgpXG5cbmNvbnN0IHN0YXJ0VGltZXIgPSAoKSA9PiB7XG5cdGlmIChnYW1lTW9kZSA9PSAxKSB7XG5cdFx0Z2FtZVRpbWVSZW1haW5pbmcgPSA2MFxuXHRcdHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0XHRnYW1lVGltZVJlbWFpbmluZyA+IDAgPyBnYW1lVGltZVJlbWFpbmluZy0tIDogZW5kR2FtZSgpXG5cdFx0XHRzdGF0c1JlbWFpbmluZ1RpbWUuaW5uZXJIVE1MID0gZ2FtZVRpbWVSZW1haW5pbmcgKyAncydcblx0XHRcdHVwZGF0ZVN0YXRzKClcblx0XHR9LCAxMDAwKVxuXHR9IGVsc2UgaWYgKGdhbWVNb2RlID09IDApIHtcblx0XHRzdGF0c1JlbWFpbmluZ1RpbWUuaW5uZXJIVE1MID0gYCZpbmZpbjtgXG5cdFx0d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdGdhbWVUaW1lR29uZSsrXG5cdFx0XHR1cGRhdGVTdGF0cygpXG5cdFx0fSwgMTAwMClcblx0fVxufVxuXG4vLyBTaG93aW5nIHN0YXRpc3RpY3MgZHVyaW5nIHRoZSB0ZXN0XG5jb25zdCBzaG93U3RhdHMgPSAoKSA9PiB7XG5cdHN0YXRzSGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcblx0c3RhdHNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xufVxuXG4vLyBVcGRhdGluZyBzdGF0aXN0aWNzIGR1cmluZyB0aGUgdGVzdFxuY29uc3QgdXBkYXRlU3RhdHMgPSAoKSA9PiB7XG5cdGlmIChnYW1lTW9kZSA9PSAxKSB7XG5cdFx0d29yZHNQZXJNaW51dGUgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gNSAvICg2MCAtIGdhbWVUaW1lUmVtYWluaW5nKSkgKiA2MClcblx0XHRjaGFyYWN0ZXJzUGVyTWludXRlID0gTWF0aC5yb3VuZCgoZ29vZExldHRlciAvICg2MCAtIGdhbWVUaW1lUmVtYWluaW5nKSkgKiA2MClcblx0XHRpZiAod29yZHNQZXJNaW51dGUgPT0gSW5maW5pdHkpIHtcblx0XHRcdHdvcmRzUGVyTWludXRlID0gYC1gXG5cdFx0XHRjaGFyYWN0ZXJzUGVyTWludXRlID0gYC1gXG5cdFx0fVxuXHR9IGVsc2UgaWYgKGdhbWVNb2RlID09IDApIHtcblx0XHR3b3Jkc1Blck1pbnV0ZSA9IE1hdGgucm91bmQoKGdvb2RMZXR0ZXIgLyA1IC8gZ2FtZVRpbWVHb25lKSAqIDYwKVxuXHRcdGNoYXJhY3RlcnNQZXJNaW51dGUgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gZ2FtZVRpbWVHb25lKSAqIDYwKVxuXHRcdGlmICh3b3Jkc1Blck1pbnV0ZSA9PSBJbmZpbml0eSkge1xuXHRcdFx0d29yZHNQZXJNaW51dGUgPSBgLWBcblx0XHRcdGNoYXJhY3RlcnNQZXJNaW51dGUgPSBgLWBcblx0XHR9XG5cdH1cblx0YWN0dWFsTGV0dGVyID09IDAgPyAoYWNjdXJhY3kgPSAwKSA6IChhY2N1cmFjeSA9IE1hdGgucm91bmQoKGdvb2RMZXR0ZXIgLyAoZ29vZExldHRlciArIHdyb25nTGV0dGVyKSkgKiAxMDApKVxuXHRzdGF0c1dQTS5pbm5lclRleHQgPSBgJHt3b3Jkc1Blck1pbnV0ZX1gXG5cdHN0YXRzQ1BNLmlubmVyVGV4dCA9IGAke2NoYXJhY3RlcnNQZXJNaW51dGV9YFxuXHRzdGF0c0FjY3VyYWN5LmlubmVyVGV4dCA9IGAke2FjY3VyYWN5fSVgXG59XG5cbi8vIFN0YXJ0IGdhbWUsIGdlbmVyYXRpbmcgdGV4dCBhbmQgZm9jdXMgaW5wdXRcbmNvbnN0IHN0YXJ0R2FtZSA9ICgpID0+IHtcblx0c3RhcnRTaXRlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcblx0dGVzdFNpdGUuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xuXHQvLyBnZW5lcmF0ZVRleHQoKVxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4gaW5wdXRGaWVsZC5mb2N1cygpKVxuXHR0ZXN0VGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGlucHV0RmllbGQuZm9jdXMoKSlcbn1cblxuLy8gV2hvbGUgZ2FtZSBsb2dpY1xuY29uc3QgZ2FtZUxvZ2ljID0gZSA9PiB7XG5cdGNvbnN0IGFsbExldHRlcnMgPSB0ZXN0VGV4dC5pbm5lclRleHQuc3BsaXQoJycpXG5cblx0aWYgKGlucHV0RmllbGQudmFsdWUuc3BsaXQoJycpW2FjdHVhbExldHRlcl0gPT09IGFsbExldHRlcnNbYWN0dWFsTGV0dGVyXSkge1xuXHRcdGFsbFNwYW5zW2FjdHVhbExldHRlcl0uY2xhc3NOYW1lID0gJydcblx0XHRhbGxTcGFuc1thY3R1YWxMZXR0ZXJdLmNsYXNzTGlzdC5hZGQoJ2NvcnJlY3QtbGV0dGVyJylcblx0XHRpZiAoIShhbGxTcGFuc1tsZXR0ZXJUb1R5cGVdID09IHVuZGVmaW5lZCkpIHtcblx0XHRcdGFsbFNwYW5zW2xldHRlclRvVHlwZV0uY2xhc3NMaXN0LmFkZCgnbGV0dGVyLXRvLXR5cGUnKVxuXHRcdH1cblx0XHRhY3R1YWxMZXR0ZXIrK1xuXHRcdGxldHRlclRvVHlwZSsrXG5cdFx0Z29vZExldHRlcisrXG5cdH0gZWxzZSBpZiAoaW5wdXRGaWVsZC52YWx1ZS5zcGxpdCgnJylbYWN0dWFsTGV0dGVyXSkge1xuXHRcdGFsbFNwYW5zW2FjdHVhbExldHRlcl0uY2xhc3NOYW1lID0gJydcblx0XHRhbGxTcGFuc1thY3R1YWxMZXR0ZXJdLmNsYXNzTGlzdC5hZGQoJ2luY29ycmVjdC1sZXR0ZXInKVxuXHRcdGlmICghKGFsbFNwYW5zW2xldHRlclRvVHlwZV0gPT0gdW5kZWZpbmVkKSkge1xuXHRcdFx0YWxsU3BhbnNbbGV0dGVyVG9UeXBlXS5jbGFzc0xpc3QuYWRkKCdsZXR0ZXItdG8tdHlwZScpXG5cdFx0fVxuXHRcdGFjdHVhbExldHRlcisrXG5cdFx0bGV0dGVyVG9UeXBlKytcblx0XHR3cm9uZ0xldHRlcisrXG5cdH0gZWxzZSBpZiAoKGUua2V5ID0gJ2JhY2tzcGFjZScpKSB7XG5cdFx0YWxsU3BhbnNbYWN0dWFsTGV0dGVyXS5jbGFzc05hbWUgPSAnJ1xuXHRcdGFjdHVhbExldHRlci0tXG5cdFx0bGV0dGVyVG9UeXBlLS1cblx0XHRhbGxTcGFuc1thY3R1YWxMZXR0ZXJdLmNsYXNzTGlzdC5jb250YWlucygnY29ycmVjdC1sZXR0ZXInKSA/IGdvb2RMZXR0ZXItLSA6IHdyb25nTGV0dGVyLS1cblx0XHRhbGxTcGFuc1tsZXR0ZXJUb1R5cGUgLSAxXS5jbGFzc0xpc3QuYWRkKCdsZXR0ZXItdG8tdHlwZScpXG5cdH1cblxuXHRpZiAoZ2FtZU1vZGUgPT0gMSAmJiBpbnB1dEZpZWxkLnZhbHVlLnNwbGl0KCcnKS5sZW5ndGggPT0gMSkge1xuXHRcdGlmIChkb05vdFJlcGVhdFRpbWVyID09IDApIHtcblx0XHRcdGRvTm90UmVwZWF0VGltZXIgPSAxXG5cdFx0XHRzdGFydFRpbWVyKClcblx0XHRcdHNob3dTdGF0cygpXG5cdFx0fVxuXHR9XG5cblx0aWYgKGdhbWVNb2RlID09IDAgJiYgaW5wdXRGaWVsZC52YWx1ZS5zcGxpdCgnJykubGVuZ3RoID09IDEpIHtcblx0XHRpZiAoZG9Ob3RSZXBlYXRUaW1lciA9PSAwKSB7XG5cdFx0XHRkb05vdFJlcGVhdFRpbWVyID0gMVxuXHRcdFx0c3RhcnRUaW1lcigpXG5cdFx0XHRzaG93U3RhdHMoKVxuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZVN0YXRzKClcblxuXHRpZiAoaW5wdXRGaWVsZC52YWx1ZS5zcGxpdCgnJykubGVuZ3RoID09IGFsbExldHRlcnMubGVuZ3RoKSB7XG5cdFx0ZW5kR2FtZSgpXG5cdH1cbn1cblxuLy8gQ2hvb3NpbmcgZ2FtZSBtb2RlICgwIGlzIGZ1bGwgdGltZSBnYW1lLCAxIGlzIHRpbWUgZ2FtZSlcbi8vIEZ1bGwgdGltZSBnYW1lIGN1cnJlbnRseSBkb2VzIG5vdCB3b3JrXG5jb25zdCBmdWxsVGltZUdhbWVNb2RlID0gKCkgPT4ge1xuXHRzdGFydEdhbWUoKVxuXHRnYW1lTW9kZSA9IDBcbn1cblxuY29uc3QgcmVtYWluaW5nVGltZUdhbWVNb2RlID0gKCkgPT4ge1xuXHRzdGFydEdhbWUoKVxuXHRnYW1lTW9kZSA9IDFcbn1cblxuLy8gRW5kaW5nIGdhbWUgYW5kIHNob3cgZmluYWwgc3RhdGlzdGljc1xuY29uc3QgZW5kR2FtZSA9ICgpID0+IHtcblx0dGVzdFNpdGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXHRzdW1tYXJ5U2l0ZS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG5cdHN1bW1hcnlTaXRlV1BNLmlubmVyVGV4dCA9IHdvcmRzUGVyTWludXRlXG5cdHN1bW1hcnlTaXRlQWNjdXJhY3kuaW5uZXJUZXh0ID0gTWF0aC5yb3VuZCgoZ29vZExldHRlciAvIChnb29kTGV0dGVyICsgd3JvbmdMZXR0ZXIpKSAqIDEwMClcbn1cblxuY29uc3QgZ29Ib21lID0gKCkgPT4ge1xuXHRsb2NhdGlvbi5yZWxvYWQoKVxufVxuXG4vLyBMaXN0ZW5lcnMgdG8gYnV0dG9uc1xuYnRuMW1pbnV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlbWFpbmluZ1RpbWVHYW1lTW9kZSlcbmJ0bkZ1bGxUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVsbFRpbWVHYW1lTW9kZSlcbi8vIFdpbGwgYmUgYWRkZWQgbGF0ZXJcbi8vIHRyeUFnYWluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdHJ5QWdhaW4pXG5pbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZ2FtZUxvZ2ljKVxuaG9tZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGdvSG9tZSlcbiJdfQ==
