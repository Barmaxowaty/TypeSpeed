"use strict";var allSpans,gameTimeRemaining,gameMode,startSite=document.querySelector(".starter-site"),testSite=document.querySelector(".test-site"),summarySite=document.querySelector(".summary-site"),testText=document.querySelector(".test-site__text p"),inputField=document.querySelector(".test-site__input"),statsHeader=document.querySelector(".test-site__header"),statsContainer=document.querySelector(".test-site__actual-stats"),statsRemainingTime=document.querySelector("#remaining-time"),statsWPM=document.querySelector("#wpm"),statsCPM=document.querySelector("#cpm"),statsAccuracy=document.querySelector("#accuracy"),summarySiteWPM=document.querySelector("#summary-site-wpm"),summarySiteAccuracy=document.querySelector("#summary-site-accuracy"),btn1minute=document.querySelector("#btn-1"),btnFullText=document.querySelector("#btn-full"),tryAgainBtn=document.querySelector("#try-again-btn"),homeBtn=document.querySelector("#home-page-btn"),charactersPerMinute=0,wordsPerMinute=0,accuracy=0,goodLetter=0,wrongLetter=0,actualLetter=0,letterToType=actualLetter+1,gameTimeGone=0,doNotRepeatTimer=0,generateText=function(){Math.floor(15*Math.random()),Math.floor(15*Math.random()+15),Math.floor((randomSentences.length-30)*Math.random()+30);"szczal pies".split("").forEach(function(e){e='<span style="padding: .6px;margin: .4px;">'.concat(e,"</span>");testText.innerHTML+=e}),(allSpans=document.querySelectorAll(".test-site__text p > span"))[0].classList.add("letter-to-type")},startTimer=(generateText(),function(){1==gameMode?(gameTimeRemaining=60,window.setInterval(function(){0<gameTimeRemaining?gameTimeRemaining--:endGame(),statsRemainingTime.innerHTML=gameTimeRemaining+"s",updateStats()},1e3)):0==gameMode&&(statsRemainingTime.innerHTML="&infin;",window.setInterval(function(){gameTimeGone++,updateStats()},1e3))}),showStats=function(){statsHeader.style.display="none",statsContainer.style.display="flex"},updateStats=function(){1==gameMode?(wordsPerMinute=Math.round(goodLetter/5/(60-gameTimeRemaining)*60),charactersPerMinute=Math.round(goodLetter/(60-gameTimeRemaining)*60),wordsPerMinute==1/0&&(charactersPerMinute=wordsPerMinute="-")):0==gameMode&&(wordsPerMinute=Math.round(goodLetter/5/gameTimeGone*60),charactersPerMinute=Math.round(goodLetter/gameTimeGone*60),wordsPerMinute==1/0)&&(charactersPerMinute=wordsPerMinute="-"),accuracy=0==actualLetter?0:Math.round(goodLetter/(goodLetter+wrongLetter)*100),statsWPM.innerText="".concat(wordsPerMinute),statsCPM.innerText="".concat(charactersPerMinute),statsAccuracy.innerText="".concat(accuracy,"%")},startGame=function(){startSite.style.display="none",testSite.style.display="flex",document.addEventListener("keydown",function(){return inputField.focus()}),testText.addEventListener("click",function(){return inputField.focus()})},gameLogic=function(e){var t=testText.innerText.split("");inputField.value.split("")[actualLetter]===t[actualLetter]?(allSpans[actualLetter].className="",allSpans[actualLetter].classList.add("correct-letter"),null!=allSpans[letterToType]&&allSpans[letterToType].classList.add("letter-to-type"),actualLetter++,letterToType++,goodLetter++):inputField.value.split("")[actualLetter]?(allSpans[actualLetter].className="",allSpans[actualLetter].classList.add("incorrect-letter"),null!=allSpans[letterToType]&&allSpans[letterToType].classList.add("letter-to-type"),actualLetter++,letterToType++,wrongLetter++):(e.key="backspace",allSpans[actualLetter].className="",letterToType--,allSpans[--actualLetter].classList.contains("correct-letter")?goodLetter--:wrongLetter--,allSpans[letterToType-1].classList.add("letter-to-type")),1==gameMode&&1==inputField.value.split("").length&&0==doNotRepeatTimer&&(doNotRepeatTimer=1,startTimer(),showStats()),0==gameMode&&1==inputField.value.split("").length&&0==doNotRepeatTimer&&(doNotRepeatTimer=1,startTimer(),showStats()),updateStats(),inputField.value.split("").length==t.length&&endGame()},fullTimeGameMode=function(){startGame(),gameMode=0},remainingTimeGameMode=function(){startGame(),gameMode=1},endGame=function(){testSite.style.display="none",summarySite.style.display="flex",summarySiteWPM.innerText=wordsPerMinute,summarySiteAccuracy.innerText=Math.round(goodLetter/(goodLetter+wrongLetter)*100)},goHome=function(){location.reload()};btn1minute.addEventListener("click",remainingTimeGameMode),btnFullText.addEventListener("click",fullTimeGameMode),inputField.addEventListener("input",gameLogic),homeBtn.addEventListener("click",goHome);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdhbWVMb2dpYy5qcyJdLCJuYW1lcyI6WyJ0ZXN0VGV4dCIsImFjdHVhbExldHRlciIsImdhbWVUaW1lUmVtYWluaW5nIiwic3RhcnRTaXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGVzdFNpdGUiLCJpbnB1dEZpZWxkIiwic3RhdHNIZWFkZXIiLCJzdGF0c0NvbnRhaW5lciIsInN0YXRzUmVtYWluaW5nVGltZSIsInN0YXRzV1BNIiwic3RhdHNDUE0iLCJzdGF0c0FjY3VyYWN5IiwiYnRuMW1pbnV0ZSIsImJ0bkZ1bGxUZXh0IiwiY2hhcmFjdGVyc1Blck1pbnV0ZSIsIndvcmRzUGVyTWludXRlIiwiYWNjdXJhY3kiLCJnb29kTGV0dGVyIiwid3JvbmdMZXR0ZXIiLCJsZXR0ZXJUb1R5cGUiLCJnYW1lVGltZUdvbmUiLCJnZW5lcmF0ZVRleHQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21TZW50ZW5jZXMiLCJsZW5ndGgiLCJzcGxpdCIsImZvckVhY2giLCJsZXR0ZXIiLCJsZXR0ZXJUYWciLCJjb25jYXQiLCJ0ZXN0VGV4dENvbnRlbnQiLCJhbGxTcGFucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJhZGQiLCJzdGFydFRpbWVyIiwiZ2FtZU1vZGUiLCJ3aW5kb3ciLCJzZXRJbnRlcnZhbCIsImVuZEdhbWUiLCJ1cGRhdGVTdGF0cyIsImlubmVySFRNTCIsInNob3dTdGF0cyIsInN0eWxlIiwiZGlzcGxheSIsIkluZmluaXR5Iiwicm91bmQiLCJpbm5lclRleHQiLCJzdGFydEdhbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiZm9jdXMiLCJnYW1lTG9naWMiLCJlIiwiYWxsTGV0dGVycyIsInZhbHVlIiwiY2xhc3NOYW1lIiwiZG9Ob3RSZXBlYXRUaW1lciIsInN1bW1hcnlTaXRlIiwic3VtbWFyeVNpdGVXUE0iLCJzdW1tYXJ5U2l0ZUFjY3VyYWN5IiwiZ29Ib21lIiwibG9jYXRpb24iLCJyZWxvYWQiLCJyZW1h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QyxJQUFBLGdCQUFBLEdBR0xqQixHQUFUYyxVQUF5QyxHQUFoQ2QsV0FBa0JnQixNQUFBQSxNQUFjLEVBQUEsRUFBQVQsUUFDMUMsR0FBQWdDLG1CQUVBQSxpQkFBaUIsRUFHZnJCLFdBRkdxQixFQUdIZCxVQUZBYyxHQUlGLEdBQUFwQixVQUFBLEdBQUFqQyxXQUFBbUQsTUFBQTdCLE1BQUEsRUFBQSxFQUFBRCxRQUVxQnJCLEdBQWpCaUMsbUJBRUZvQixpQkFER0EsRUFFSHJCLFdBREFxQixFQUVBZCxVQURBUCxHQUtGSyxZQUFXLEVBR1ZELFdBQVNlLE1BQUE3QixNQUFBLEVBQUEsRUFBQUQsUUFBQTZCLEVBQUE3QixRQUNWZSxRQUFBLENBQ0QsRUFLQ1MsaUJBQVcsV0FBWEEsVUFDUSxFQUNSWixTQUFBLENBRUQsRUFFQ0Esc0JBQVksV0FDWlksVUFBQSxFQURBWixTQUFXLENBR1osRUFHQ3FCLFFBQVlkLFdBRFp6QyxTQUVBd0QsTUFBY2QsUUFBVSxPQUR4QmEsWUFFQUUsTUFBQUEsUUFBb0JaLE9BQ3BCVyxlQUFBWCxVQUFBbEMsZUFFRDhDLG9CQUFlWixVQUFNM0IsS0FBQTBCLE1BQUEvQixZQUFBQSxXQUFBQyxhQUFBLEdBQUEsQ0FGckIsRUFFTTRDLE9BQVMsV0FJZkMsU0FBQUMsT0FBQSxDQUNBcEQsRUFHQUEsV0FBQXVDLGlCQUFBLFFBQUFjLHFCQUFBLEVBQ0E1RCxZQUFXOEMsaUJBQWlCLFFBQVNFLGdCQUFVLEVBQS9DaEQsV0FBVzhDLGlCQUFpQixRQUFTRSxTQUFTLEVBQzlDYSxRQUFRZixpQkFBaUIsUUFBU1csTUFBTSIsImZpbGUiOiJnYW1lTG9naWMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU2l0ZXNcbmNvbnN0IHN0YXJ0U2l0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydGVyLXNpdGUnKVxuY29uc3QgdGVzdFNpdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVzdC1zaXRlJylcbmNvbnN0IHN1bW1hcnlTaXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1bW1hcnktc2l0ZScpXG5cbi8vIEVsZW1lbnRzXG5jb25zdCB0ZXN0VGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXN0LXNpdGVfX3RleHQgcCcpXG5jb25zdCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlc3Qtc2l0ZV9faW5wdXQnKVxubGV0IGFsbFNwYW5zXG5cbi8vIFN0YXRzIGVsZW1lbnRzXG5jb25zdCBzdGF0c0hlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXN0LXNpdGVfX2hlYWRlcicpXG5jb25zdCBzdGF0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZXN0LXNpdGVfX2FjdHVhbC1zdGF0cycpXG5jb25zdCBzdGF0c1JlbWFpbmluZ1RpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVtYWluaW5nLXRpbWUnKVxuY29uc3Qgc3RhdHNXUE0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3BtJylcbmNvbnN0IHN0YXRzQ1BNID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NwbScpXG5jb25zdCBzdGF0c0FjY3VyYWN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FjY3VyYWN5JylcbmNvbnN0IHN1bW1hcnlTaXRlV1BNID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N1bW1hcnktc2l0ZS13cG0nKVxuY29uc3Qgc3VtbWFyeVNpdGVBY2N1cmFjeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdW1tYXJ5LXNpdGUtYWNjdXJhY3knKVxuXG4vLyBCdXR0b25zXG5jb25zdCBidG4xbWludXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0bi0xJylcbmNvbnN0IGJ0bkZ1bGxUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0bi1mdWxsJylcbmNvbnN0IHRyeUFnYWluQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RyeS1hZ2Fpbi1idG4nKVxuY29uc3QgaG9tZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNob21lLXBhZ2UtYnRuJylcblxuLy8gSGVscCB2YXJpYWJsZXNcbmxldCBjaGFyYWN0ZXJzUGVyTWludXRlID0gMFxubGV0IHdvcmRzUGVyTWludXRlID0gMFxubGV0IGFjY3VyYWN5ID0gMFxubGV0IGdvb2RMZXR0ZXIgPSAwXG5sZXQgd3JvbmdMZXR0ZXIgPSAwXG5sZXQgYWN0dWFsTGV0dGVyID0gMFxubGV0IGxldHRlclRvVHlwZSA9IGFjdHVhbExldHRlciArIDFcbmxldCBnYW1lVGltZVJlbWFpbmluZ1xubGV0IGdhbWVUaW1lR29uZSA9IDBcbmxldCBnYW1lTW9kZVxubGV0IGRvTm90UmVwZWF0VGltZXIgPSAwXG5cbi8vIEZ1bmN0aW9uc1xuXG4vLyBHZW5lcmF0aW5nIHRleHQgZm9yIHRlc3RcbmNvbnN0IGdlbmVyYXRlVGV4dCA9ICgpID0+IHtcblx0Ly8gR2VuZXJhdGluZyAzIHJhbmRvbSBudW1iZXJzLCB0aGVuIGNyZWF0ZSB0ZXh0IHdpdGggMyBlbGVtZW50cyBmcm9tIHJhbmRvbVNlbnRlbmNlcy5qc1xuXHRsZXQgcmFuZG9tTnVtYmVyMSA9IE1hdGguZmxvb3IoMTUgKiBNYXRoLnJhbmRvbSgpKVxuXHRsZXQgcmFuZG9tTnVtYmVyMiA9IE1hdGguZmxvb3IoMTUgKiBNYXRoLnJhbmRvbSgpICsgMTUpXG5cdGxldCByYW5kb21OdW1iZXIzID0gTWF0aC5mbG9vcigocmFuZG9tU2VudGVuY2VzLmxlbmd0aCAtIDMwKSAqIE1hdGgucmFuZG9tKCkgKyAzMClcblxuXHQvLyBjb25zdCB0ZXN0VGV4dENvbnRlbnQgPSBgJHtyYW5kb21TZW50ZW5jZXNbcmFuZG9tTnVtYmVyMV19ICR7cmFuZG9tU2VudGVuY2VzW3JhbmRvbU51bWJlcjJdfSAke3JhbmRvbVNlbnRlbmNlc1tyYW5kb21OdW1iZXIzXX1gXG5cdGNvbnN0IHRlc3RUZXh0Q29udGVudCA9IGBzemN6YWwgcGllc2BcblxuXHQvLyBTcGxpdCBnYW1lIHRleHQgbGV0dGVycyB0byBzcGFucyAoYmVhY3VzZSBpdCBpcyBlYXNpZXIgdG8gY2hlY2sgd3JvbmcvZ29vZCBsZXR0ZXIgbGF0ZXIpXG5cdHRlc3RUZXh0Q29udGVudC5zcGxpdCgnJykuZm9yRWFjaChsZXR0ZXIgPT4ge1xuXHRcdGxldCBsZXR0ZXJUYWcgPSBgPHNwYW4gc3R5bGU9XCJwYWRkaW5nOiAuNnB4O21hcmdpbjogLjRweDtcIj4ke2xldHRlcn08L3NwYW4+YFxuXHRcdHRlc3RUZXh0LmlubmVySFRNTCArPSBsZXR0ZXJUYWdcblx0fSlcblxuXHQvLyBEZWNsYXJlIHNwYW5zIGFuZCBnaXZlIGFuaW1hdGlvbiB0byBmaXJzdCBzcGFuXG5cdGFsbFNwYW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlc3Qtc2l0ZV9fdGV4dCBwID4gc3BhbicpXG5cdGFsbFNwYW5zWzBdLmNsYXNzTGlzdC5hZGQoJ2xldHRlci10by10eXBlJylcbn1cblxuZ2VuZXJhdGVUZXh0KClcblxuY29uc3Qgc3RhcnRUaW1lciA9ICgpID0+IHtcblx0aWYgKGdhbWVNb2RlID09IDEpIHtcblx0XHRnYW1lVGltZVJlbWFpbmluZyA9IDYwXG5cdFx0d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdGdhbWVUaW1lUmVtYWluaW5nID4gMCA/IGdhbWVUaW1lUmVtYWluaW5nLS0gOiBlbmRHYW1lKClcblx0XHRcdHN0YXRzUmVtYWluaW5nVGltZS5pbm5lckhUTUwgPSBnYW1lVGltZVJlbWFpbmluZyArICdzJ1xuXHRcdFx0dXBkYXRlU3RhdHMoKVxuXHRcdH0sIDEwMDApXG5cdH0gZWxzZSBpZiAoZ2FtZU1vZGUgPT0gMCkge1xuXHRcdHN0YXRzUmVtYWluaW5nVGltZS5pbm5lckhUTUwgPSBgJmluZmluO2Bcblx0XHR3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHRcdFx0Z2FtZVRpbWVHb25lKytcblx0XHRcdHVwZGF0ZVN0YXRzKClcblx0XHR9LCAxMDAwKVxuXHR9XG59XG5cbi8vIFNob3dpbmcgc3RhdGlzdGljcyBkdXJpbmcgdGhlIHRlc3RcbmNvbnN0IHNob3dTdGF0cyA9ICgpID0+IHtcblx0c3RhdHNIZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXHRzdGF0c0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG59XG5cbi8vIFVwZGF0aW5nIHN0YXRpc3RpY3MgZHVyaW5nIHRoZSB0ZXN0XG5jb25zdCB1cGRhdGVTdGF0cyA9ICgpID0+IHtcblx0aWYgKGdhbWVNb2RlID09IDEpIHtcblx0XHR3b3Jkc1Blck1pbnV0ZSA9IE1hdGgucm91bmQoKGdvb2RMZXR0ZXIgLyA1IC8gKDYwIC0gZ2FtZVRpbWVSZW1haW5pbmcpKSAqIDYwKVxuXHRcdGNoYXJhY3RlcnNQZXJNaW51dGUgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gKDYwIC0gZ2FtZVRpbWVSZW1haW5pbmcpKSAqIDYwKVxuXHRcdGlmICh3b3Jkc1Blck1pbnV0ZSA9PSBJbmZpbml0eSkge1xuXHRcdFx0d29yZHNQZXJNaW51dGUgPSBgLWBcblx0XHRcdGNoYXJhY3RlcnNQZXJNaW51dGUgPSBgLWBcblx0XHR9XG5cdH0gZWxzZSBpZiAoZ2FtZU1vZGUgPT0gMCkge1xuXHRcdHdvcmRzUGVyTWludXRlID0gTWF0aC5yb3VuZCgoZ29vZExldHRlciAvIDUgLyBnYW1lVGltZUdvbmUpICogNjApXG5cdFx0Y2hhcmFjdGVyc1Blck1pbnV0ZSA9IE1hdGgucm91bmQoKGdvb2RMZXR0ZXIgLyBnYW1lVGltZUdvbmUpICogNjApXG5cdFx0aWYgKHdvcmRzUGVyTWludXRlID09IEluZmluaXR5KSB7XG5cdFx0XHR3b3Jkc1Blck1pbnV0ZSA9IGAtYFxuXHRcdFx0Y2hhcmFjdGVyc1Blck1pbnV0ZSA9IGAtYFxuXHRcdH1cblx0fVxuXHRhY3R1YWxMZXR0ZXIgPT0gMCA/IChhY2N1cmFjeSA9IDApIDogKGFjY3VyYWN5ID0gTWF0aC5yb3VuZCgoZ29vZExldHRlciAvIChnb29kTGV0dGVyICsgd3JvbmdMZXR0ZXIpKSAqIDEwMCkpXG5cdHN0YXRzV1BNLmlubmVyVGV4dCA9IGAke3dvcmRzUGVyTWludXRlfWBcblx0c3RhdHNDUE0uaW5uZXJUZXh0ID0gYCR7Y2hhcmFjdGVyc1Blck1pbnV0ZX1gXG5cdHN0YXRzQWNjdXJhY3kuaW5uZXJUZXh0ID0gYCR7YWNjdXJhY3l9JWBcbn1cblxuLy8gU3RhcnQgZ2FtZSwgZ2VuZXJhdGluZyB0ZXh0IGFuZCBmb2N1cyBpbnB1dFxuY29uc3Qgc3RhcnRHYW1lID0gKCkgPT4ge1xuXHRzdGFydFNpdGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuXHR0ZXN0U2l0ZS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnXG5cdC8vIGdlbmVyYXRlVGV4dCgpXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoKSA9PiBpbnB1dEZpZWxkLmZvY3VzKCkpXG5cdHRlc3RUZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaW5wdXRGaWVsZC5mb2N1cygpKVxufVxuXG4vLyBXaG9sZSBnYW1lIGxvZ2ljXG5jb25zdCBnYW1lTG9naWMgPSBlID0+IHtcblx0Y29uc3QgYWxsTGV0dGVycyA9IHRlc3RUZXh0LmlubmVyVGV4dC5zcGxpdCgnJylcblxuXHRpZiAoaW5wdXRGaWVsZC52YWx1ZS5zcGxpdCgnJylbYWN0dWFsTGV0dGVyXSA9PT0gYWxsTGV0dGVyc1thY3R1YWxMZXR0ZXJdKSB7XG5cdFx0YWxsU3BhbnNbYWN0dWFsTGV0dGVyXS5jbGFzc05hbWUgPSAnJ1xuXHRcdGFsbFNwYW5zW2FjdHVhbExldHRlcl0uY2xhc3NMaXN0LmFkZCgnY29ycmVjdC1sZXR0ZXInKVxuXHRcdGlmICghKGFsbFNwYW5zW2xldHRlclRvVHlwZV0gPT0gdW5kZWZpbmVkKSkge1xuXHRcdFx0YWxsU3BhbnNbbGV0dGVyVG9UeXBlXS5jbGFzc0xpc3QuYWRkKCdsZXR0ZXItdG8tdHlwZScpXG5cdFx0fVxuXHRcdGFjdHVhbExldHRlcisrXG5cdFx0bGV0dGVyVG9UeXBlKytcblx0XHRnb29kTGV0dGVyKytcblx0fSBlbHNlIGlmIChpbnB1dEZpZWxkLnZhbHVlLnNwbGl0KCcnKVthY3R1YWxMZXR0ZXJdKSB7XG5cdFx0YWxsU3BhbnNbYWN0dWFsTGV0dGVyXS5jbGFzc05hbWUgPSAnJ1xuXHRcdGFsbFNwYW5zW2FjdHVhbExldHRlcl0uY2xhc3NMaXN0LmFkZCgnaW5jb3JyZWN0LWxldHRlcicpXG5cdFx0aWYgKCEoYWxsU3BhbnNbbGV0dGVyVG9UeXBlXSA9PSB1bmRlZmluZWQpKSB7XG5cdFx0XHRhbGxTcGFuc1tsZXR0ZXJUb1R5cGVdLmNsYXNzTGlzdC5hZGQoJ2xldHRlci10by10eXBlJylcblx0XHR9XG5cdFx0YWN0dWFsTGV0dGVyKytcblx0XHRsZXR0ZXJUb1R5cGUrK1xuXHRcdHdyb25nTGV0dGVyKytcblx0fSBlbHNlIGlmICgoZS5rZXkgPSAnYmFja3NwYWNlJykpIHtcblx0XHRhbGxTcGFuc1thY3R1YWxMZXR0ZXJdLmNsYXNzTmFtZSA9ICcnXG5cdFx0YWN0dWFsTGV0dGVyLS1cblx0XHRsZXR0ZXJUb1R5cGUtLVxuXHRcdGFsbFNwYW5zW2FjdHVhbExldHRlcl0uY2xhc3NMaXN0LmNvbnRhaW5zKCdjb3JyZWN0LWxldHRlcicpID8gZ29vZExldHRlci0tIDogd3JvbmdMZXR0ZXItLVxuXHRcdGFsbFNwYW5zW2xldHRlclRvVHlwZSAtIDFdLmNsYXNzTGlzdC5hZGQoJ2xldHRlci10by10eXBlJylcblx0fVxuXG5cdGlmIChnYW1lTW9kZSA9PSAxICYmIGlucHV0RmllbGQudmFsdWUuc3BsaXQoJycpLmxlbmd0aCA9PSAxKSB7XG5cdFx0aWYgKGRvTm90UmVwZWF0VGltZXIgPT0gMCkge1xuXHRcdFx0ZG9Ob3RSZXBlYXRUaW1lciA9IDFcblx0XHRcdHN0YXJ0VGltZXIoKVxuXHRcdFx0c2hvd1N0YXRzKClcblx0XHR9XG5cdH1cblxuXHRpZiAoZ2FtZU1vZGUgPT0gMCAmJiBpbnB1dEZpZWxkLnZhbHVlLnNwbGl0KCcnKS5sZW5ndGggPT0gMSkge1xuXHRcdGlmIChkb05vdFJlcGVhdFRpbWVyID09IDApIHtcblx0XHRcdGRvTm90UmVwZWF0VGltZXIgPSAxXG5cdFx0XHRzdGFydFRpbWVyKClcblx0XHRcdHNob3dTdGF0cygpXG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlU3RhdHMoKVxuXG5cdGlmIChpbnB1dEZpZWxkLnZhbHVlLnNwbGl0KCcnKS5sZW5ndGggPT0gYWxsTGV0dGVycy5sZW5ndGgpIHtcblx0XHRlbmRHYW1lKClcblx0fVxufVxuXG4vLyBDaG9vc2luZyBnYW1lIG1vZGUgKDAgaXMgZnVsbCB0aW1lIGdhbWUsIDEgaXMgdGltZSBnYW1lKVxuLy8gRnVsbCB0aW1lIGdhbWUgY3VycmVudGx5IGRvZXMgbm90IHdvcmtcbmNvbnN0IGZ1bGxUaW1lR2FtZU1vZGUgPSAoKSA9PiB7XG5cdHN0YXJ0R2FtZSgpXG5cdGdhbWVNb2RlID0gMFxufVxuXG5jb25zdCByZW1haW5pbmdUaW1lR2FtZU1vZGUgPSAoKSA9PiB7XG5cdHN0YXJ0R2FtZSgpXG5cdGdhbWVNb2RlID0gMVxufVxuXG4vLyBFbmRpbmcgZ2FtZSBhbmQgc2hvdyBmaW5hbCBzdGF0aXN0aWNzXG5jb25zdCBlbmRHYW1lID0gKCkgPT4ge1xuXHR0ZXN0U2l0ZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG5cdHN1bW1hcnlTaXRlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcblx0c3VtbWFyeVNpdGVXUE0uaW5uZXJUZXh0ID0gd29yZHNQZXJNaW51dGVcblx0c3VtbWFyeVNpdGVBY2N1cmFjeS5pbm5lclRleHQgPSBNYXRoLnJvdW5kKChnb29kTGV0dGVyIC8gKGdvb2RMZXR0ZXIgKyB3cm9uZ0xldHRlcikpICogMTAwKVxufVxuXG5jb25zdCBnb0hvbWUgPSAoKSA9PiB7XG5cdGxvY2F0aW9uLnJlbG9hZCgpXG59XG5cbi8vIExpc3RlbmVycyB0byBidXR0b25zXG5idG4xbWludXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVtYWluaW5nVGltZUdhbWVNb2RlKVxuYnRuRnVsbFRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdWxsVGltZUdhbWVNb2RlKVxuLy8gV2lsbCBiZSBhZGRlZCBsYXRlclxuLy8gdHJ5QWdhaW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0cnlBZ2FpbilcbmlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBnYW1lTG9naWMpXG5ob21lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZ29Ib21lKVxuIl19
